Hello karel

KW_FUNC         |function
ID              |tointeger
ID              |f
DOUBLEDOT       |
KW_NUM          |number
DOUBLEDOT       |
KW_INT          |integer
KW_LOCAL        |local
DOUBLEDOT       |
KW_NUM          |number
KW_LOCAL        |local
ID              |ret
DOUBLEDOT       |
KW_INT          |integer
KW_IF           |if
ID              |type
ID              |f
EQUAL           |
STREND          |"number"
ID              |or
ID              |type
ID              |f
EQUAL           |
STREND          |"integer"
KW_THEN         |then
ID              |ret
ASSIGN          |
ID              |math
ID              |modf
ID              |f
KW_END          |end
KW_RETURN       |return
ID              |ret
KW_END          |end
KW_FUNC         |function
ID              |readi
RBR             |
DOUBLEDOT       |
KW_INT          |integer
KW_LOCAL        |local
ID              |ret
DOUBLEDOT       |
KW_STR          |string
KW_LOCAL        |local
DOUBLEDOT       |
KW_STR          |string
KW_LOCAL        |local
ID              |rest
DOUBLEDOT       |
KW_STR          |string
ID              |ret
ASSIGN          |
ID              |io
ID              |read
STREND          |"*n"
RBR             |
ID              |rest
ASSIGN          |
ID              |io
ID              |read
STREND          |"*l"
RBR             |
KW_IF           |if
KW_STR          |string
ID              |match
ID              |rest
STREND          |"%g"
RBR             |
NEQUAL          |
KW_NIL          |nil
KW_THEN         |then
KW_RETURN       |return
KW_NIL          |nil
KW_END          |end
KW_RETURN       |return
ID              |math
ID              |tointeger
ID              |ret
KW_END          |end
KW_FUNC         |function
ID              |readn
RBR             |
DOUBLEDOT       |
KW_NUM          |number
KW_LOCAL        |local
ID              |ret
DOUBLEDOT       |
KW_STR          |string
KW_LOCAL        |local
DOUBLEDOT       |
KW_STR          |string
KW_LOCAL        |local
ID              |rest
DOUBLEDOT       |
KW_STR          |string
ID              |ret
ASSIGN          |
ID              |io
ID              |read
STREND          |"*n"
RBR             |
ID              |rest
ASSIGN          |
ID              |io
ID              |read
STREND          |"*l"
RBR             |
KW_IF           |if
KW_STR          |string
ID              |match
ID              |rest
STREND          |"%g"
RBR             |
NEQUAL          |
KW_NIL          |nil
KW_THEN         |then
KW_RETURN       |return
KW_NIL          |nil
KW_END          |end
KW_RETURN       |return
ID              |tonumber
ID              |ret
KW_END          |end
KW_FUNC         |function
ID              |reads
RBR             |
DOUBLEDOT       |
KW_STR          |string
KW_LOCAL        |local
ID              |ret
DOUBLEDOT       |
KW_STR          |string
KW_LOCAL        |local
DOUBLEDOT       |
KW_STR          |string
ID              |ret
ASSIGN          |
ID              |io
ID              |read
STREND          |"*l"
RBR             |
KW_RETURN       |return
ID              |tostring
ID              |ret
KW_END          |end
KW_FUNC         |function
ID              |write
CONCAT          |
DOT             |
DOUBLEDOT       |
KW_STR          |string
KW_INT          |integer
KW_NUM          |number
ID              |boolean
KW_LOCAL        |local
ID              |va
ASSIGN          |
LCBR            |
ID              |n
ASSIGN          |
ID              |select
STREND          |"#"
COMMA           |
CONCAT          |
DOT             |
RBR             |
COMMA           |
CONCAT          |
DOT             |
RCBR            |
ID              |for
ID              |i
ASSIGN          |
INT             |1
COMMA           |
ID              |va
ID              |n
KW_DO           |do
KW_LOCAL        |local
ID              |x
ASSIGN          |
ID              |va
ID              |i
KW_IF           |if
ID              |type
ID              |x
EQUAL           |
STREND          |"number"
KW_THEN         |then
KW_IF           |if
LBR             |
ID              |pcall
KW_FUNC         |function
LBR             |
RBR             |
KW_STR          |string
ID              |format
STREND          |"%i"
COMMA           |
ID              |x
KW_END          |end
RBR             |
KW_THEN         |then
KW_IF           |if
KW_STR          |string
ID              |find
ID              |tostring
ID              |x
COMMA           |
STREND          |"."
COMMA           |
INT             |1
COMMA           |
ID              |true
EQUAL           |
KW_NIL          |nil
KW_THEN         |then
ID              |io
ID              |write
KW_STR          |string
ID              |format
STREND          |"%i"
COMMA           |
ID              |x
RBR             |
KW_ELSE         |else
ID              |io
ID              |write
KW_STR          |string
ID              |format
STREND          |"%a"
COMMA           |
ID              |x
RBR             |
KW_END          |end
KW_ELSE         |else
ID              |io
ID              |write
KW_STR          |string
ID              |format
STREND          |"%a"
COMMA           |
ID              |x
RBR             |
KW_END          |end
ID              |elseif
ID              |type
ID              |x
EQUAL           |
STREND          |"integer"
KW_THEN         |then
ID              |io
ID              |write
KW_STR          |string
ID              |format
STREND          |"%i"
COMMA           |
ID              |x
RBR             |
KW_ELSE         |else
ID              |io
ID              |write
ID              |tostring
ID              |x
RBR             |
KW_END          |end
KW_END          |end
KW_END          |end
KW_FUNC         |function
ID              |substr
ID              |str
DOUBLEDOT       |
KW_STR          |string
ID              |i
DOUBLEDOT       |
KW_INT          |integer
ID              |j
DOUBLEDOT       |
KW_INT          |integer
DOUBLEDOT       |
KW_STR          |string
KW_IF           |if
ID              |str
EQUAL           |
KW_NIL          |nil
ID              |or
ID              |i
EQUAL           |
KW_NIL          |nil
ID              |or
ID              |j
EQUAL           |
KW_NIL          |nil
KW_THEN         |then
ID              |error
STREND          |"ERROR 8: Unexpected nil value in the parameters."
RBR             |
KW_END          |end
KW_IF           |if
ID              |i
LTE             |
BLOCK_END       |0
ID              |or
ID              |i
GT              |
LEN             |
ID              |str
ID              |and
ID              |j
LTE             |
BLOCK_END       |0
ID              |or
ID              |j
GT              |
LEN             |
ID              |str
KW_THEN         |then
KW_RETURN       |return
STREND          |""
KW_END          |end
KW_RETURN       |return
KW_STR          |string
ID              |sub
ID              |str
ID              |i
ID              |j
KW_END          |end
KW_FUNC         |function
ID              |ord
ID              |s
DOUBLEDOT       |
KW_STR          |string
ID              |i
DOUBLEDOT       |
KW_INT          |integer
DOUBLEDOT       |
KW_INT          |integer
KW_IF           |if
ID              |s
EQUAL           |
KW_NIL          |nil
ID              |or
ID              |i
EQUAL           |
KW_NIL          |nil
KW_THEN         |then
ID              |error
STREND          |"ERROR 8: Unexpected nil value in the parameters."
RBR             |
KW_END          |end
KW_IF           |if
ID              |i
LTE             |
BLOCK_END       |0
ID              |or
ID              |i
GT              |
LEN             |
ID              |s
KW_THEN         |then
KW_RETURN       |return
KW_NIL          |nil
KW_END          |end
KW_RETURN       |return
KW_STR          |string
ID              |byte
ID              |s
ID              |i
KW_END          |end
KW_FUNC         |function
ID              |chr
ID              |i
DOUBLEDOT       |
KW_INT          |integer
DOUBLEDOT       |
KW_STR          |string
KW_IF           |if
ID              |i
EQUAL           |
KW_NIL          |nil
KW_THEN         |then
ID              |error
STREND          |"ERROR 8: Unexpected nil value in the parameter."
RBR             |
KW_END          |end
KW_IF           |if
ID              |i
LT              |
BLOCK_END       |0
ID              |or
ID              |i
GT              |
INT             |255
KW_THEN         |then
KW_RETURN       |return
KW_NIL          |nil
KW_END          |end
KW_RETURN       |return
KW_STR          |string
ID              |char
ID              |i
KW_END          |end
